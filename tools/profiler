#!/bin/bash
# Wrapper script for the CrystalCog performance profiler
# This script runs the Crystal profiler CLI tool

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROFILER_CR="$SCRIPT_DIR/profiler.cr"

# Check if Crystal is installed
if ! command -v crystal &> /dev/null; then
    echo "Error: Crystal is not installed. Please install Crystal first."
    echo "Visit: https://crystal-lang.org/install/"
    if [ -f "./scripts/install-crystal.sh" ]; then
        echo "Or run: ./scripts/install-crystal.sh"
    fi
    exit 1
fi

# Run the profiler with all provided arguments
crystal run "$PROFILER_CR" -- "$@"
